<head>
	<title>{{title}}</title>
	
</head>

<h1 class="title">Minesweeper</h1>
<div class="main">
	<div class="generate col">
		<form (submit)="setupGame(width, height, mines)">
			<label class="input">
				Width:
				<input type="number" name="mWidth" class="input" [(ngModel)]="width" step="1" max="20"
					   ng-pattern="integerval" required />
			</label>
			<label class="input">
				Height:
				<input type="number" name="mHeight" class="input" [(ngModel)]="height" step="1" max="20"
					   ng-pattern="integerval" required />
			</label>
			<label class="input">
				Mines:
				<input type="number" name="mMines" class="input" [(ngModel)]="mines" step="1" max="20"
					   ng-pattern="integerval" required />
			</label>
			<button class="generatebutton button">Generate New Game</button>
		</form>
		<button class="checkButton button" (click)="validate()">Check Game</button>
		<p class="correct" *ngIf="hasWon == true">Correct!</p>
		<p class="incorrect" *ngIf="hasWon == false">Incorrect!</p>
	</div>

<form (submit)="setupGame(width, height, mines)">
	<label>
		Width:
		<input type="number" name="nWidth" [(ngModel)]="width" step="1" max="20" ng-pattern="integerval" required />
	</label>
	<label>
		Height:
		<input type="number" name="nHeight" [(ngModel)]="height" step="1" max="20" ng-pattern="integerval" required />
	</label>
	<label>
		Mines:
		<input type="number" name="nMines" [(ngModel)]="mines" step="1" max="20" ng-pattern="integerval" required />
	</label>
	<button>
		Generate New Game
	</button>
</form>

<button (click)="validate()">Check Game</button>
<p class="correct" *ngIf="hasWon == true">Correct!</p>
<p class="incorrect" *ngIf="hasWon == false">Incorrect!</p>

<table style="float:left" id='game' *ngIf="cells">
	<tbody>
		<tr *ngFor="let row of cells; let r = index">
			<td *ngFor="let cell of row; let c = index"
				(click)="onLClick(r,c)"
				(contextmenu)="onRClick($event, r, c)">
					<button class="cell hidden" *ngIf="solution[r][c] == 0">-</button>
					<button class="cell shown" *ngIf="solution[r][c] == 1">{{cell}}</button>
					<button class="cell flagged" *ngIf="solution[r][c] == 2 || solution[r][c] == 3">X</button>
			</td>
		</tr>
	</tbody>
</table>

</div>